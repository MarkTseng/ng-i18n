<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>ng-i18n by gertn</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/main.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>

      <header>
        <h1>ng-i18n</h1>
        <p>Internationalization module for angular.js</p>
      </header>

      <div id="banner">
        <span id="logo"></span>

        <a href="https://github.com/gertn/ng-i18n" class="button fork"><strong>View On GitHub</strong></a>
        <div class="downloads">
          <span>Downloads:</span>
          <ul>
            <li><a href="https://github.com/gertn/ng-i18n/zipball/master" class="button">ZIP</a></li>
            <li><a href="https://github.com/gertn/ng-i18n/tarball/master" class="button">TAR</a></li>
          </ul>
        </div>
      </div><!-- end banner -->

    <div class="wrapper">
      <nav>
        <ul></ul>
      </nav>
      <section>
        <p><a href="https://travis-ci.org/gertn/ng-i18n"><img src="https://travis-ci.org/gertn/ng-i18n.png" alt="Build Status"></a></p>

<h1>Internationalization module for AngularJS</h1>

<p>This is an internationalization module for AngularJS, it allows you to localize your application with resource bundles.
<br>
The file extension of the resource bundles files is '.json'.
<br>
The build and compressed files can be found in the <code>dist</code> directory.</p>

<h2>How to use</h2>

<p>This example uses two locales, 'en' which is the default and 'nl'.
<br>
For more configuration options take a look at the 'ngI18nConfig' section.</p>

<h3>1. create your resource bundle files</h3>

<p>You need to provide a default resource bundle for the default locale and one for locale 'nl'.
<br>
Put these resource bundles in the 'i18n' directory.</p>

<pre><code>i18n/
    resourceBundle.json
    resourceBundle_nl.json
</code></pre>

<p>example resourceBundle.json (for default locale)</p>

<div class="highlight"><pre><span class="p">{</span>
    <span class="s2">"view_1"</span><span class="o">:</span><span class="s2">"First view"</span><span class="p">,</span>
    <span class="s2">"view_2"</span><span class="o">:</span><span class="s2">"Second view"</span><span class="p">,</span>
    <span class="s2">"language"</span><span class="o">:</span> <span class="s2">"Language"</span><span class="p">,</span>
    <span class="s2">"text_view_1"</span><span class="o">:</span><span class="s2">"This is the first view, hopefully in English :)"</span><span class="p">,</span>
    <span class="s2">"text_view_2"</span><span class="o">:</span><span class="s2">"This is the second view, hopefully in English :)"</span>
<span class="p">}</span>
</pre></div>

<p>example resourceBundle_nl.json (for locale 'nl')</p>

<div class="highlight"><pre><span class="p">{</span>
    <span class="s2">"view_1"</span><span class="o">:</span><span class="s2">"Eerste view"</span><span class="p">,</span>
    <span class="s2">"view_2"</span><span class="o">:</span><span class="s2">"Tweede view"</span><span class="p">,</span>
    <span class="s2">"language"</span><span class="o">:</span> <span class="s2">"Taal"</span><span class="p">,</span>
    <span class="s2">"text_view_1"</span><span class="o">:</span><span class="s2">"Dit is de eerste view, hopelijk in het Nederlands :)"</span><span class="p">,</span>
    <span class="s2">"text_view_2"</span><span class="o">:</span><span class="s2">"Dit is de tweede view, hopelijk in het Nederlands :)"</span>
<span class="p">}</span>
</pre></div>

<h3>2. add script tag after angular.js</h3>

<div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"angular.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"ng-i18n.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>

<h3>3. configure the module</h3>

<div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">yourApp</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'yourApp'</span><span class="p">,[</span><span class="s1">'ngI18n'</span><span class="p">,</span> <span class="p">...</span> <span class="p">{</span><span class="nx">other</span> <span class="nx">includes</span><span class="p">}]);</span>
    <span class="nx">yourApp</span><span class="p">.</span><span class="nx">value</span><span class="p">(</span><span class="s1">'ngI18nConfig'</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">defaultLocale</span><span class="o">:</span> <span class="s1">'en'</span><span class="p">,</span>
        <span class="nx">supportedLocales</span><span class="o">:</span> <span class="p">[</span><span class="s1">'en'</span><span class="p">,</span> <span class="s1">'nl'</span><span class="p">],</span>
    <span class="p">});</span>
</pre></div>

<h3>4. add language switcher to your html</h3>

<div class="highlight"><pre>    <span class="nt">&lt;select</span> <span class="na">name=</span><span class="s">"switchLanguage"</span> <span class="na">ng-model=</span><span class="s">"language"</span> <span class="na">id=</span><span class="s">"switchLanguage"</span> <span class="na">ng-options=</span><span class="s">"l.locale for l in languages"</span><span class="nt">&gt;</span>
</pre></div>

<h3>5. load the resource bundle from your main controller and $watch for changes to the language model</h3>

<div class="highlight"><pre>   <span class="kd">function</span> <span class="nx">MainCtrl</span><span class="p">(</span><span class="nx">ngI18nResourceBundle</span><span class="p">,</span> <span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>

       <span class="nx">$scope</span><span class="p">.</span><span class="nx">languages</span> <span class="o">=</span> <span class="p">[</span>
           <span class="p">{</span><span class="nx">locale</span><span class="o">:</span><span class="s2">"en"</span><span class="p">},</span>
           <span class="p">{</span><span class="nx">locale</span><span class="o">:</span><span class="s2">"nl"</span><span class="p">}</span>
       <span class="p">];</span>

       <span class="nx">$scope</span><span class="p">.</span><span class="nx">language</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">languages</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>

       <span class="nx">$scope</span><span class="p">.</span><span class="nx">$watch</span><span class="p">(</span><span class="s1">'language'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">language</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">ngI18nResourceBundle</span><span class="p">.</span><span class="nx">get</span><span class="p">({</span><span class="nx">locale</span><span class="o">:</span> <span class="nx">language</span><span class="p">.</span><span class="nx">locale</span><span class="p">}).</span><span class="nx">success</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">resourceBundle</span><span class="p">)</span> <span class="p">{</span>
               <span class="nx">$scope</span><span class="p">.</span><span class="nx">resourceBundle</span> <span class="o">=</span> <span class="nx">resourceBundle</span><span class="p">;</span>
           <span class="p">});</span>
       <span class="p">});</span>
   <span class="p">}</span>
   <span class="nx">MainCtrl</span><span class="p">.</span><span class="nx">$inject</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'ngI18nResourceBundle'</span><span class="p">,</span> <span class="s1">'$scope'</span><span class="p">];</span>
</pre></div>

<h3>6. use the resourceBundle variable in your pages</h3>

<div class="highlight"><pre>    <span class="nt">&lt;p&gt;</span>{{resourceBundle.text_view_1}}<span class="nt">&lt;/p&gt;</span>
</pre></div>

<p>If you selected 'en' as language then '{{resourceBundle.text_view_1}}' will be displayed as:  <br>
This is the first view, hopefully in English :)
<br>
If you selected 'nl' as language then  it will be displayed as: <br>
Dit is de eerste view, hopelijk in het Nederlands :)</p>

<h2>ngI18nConfig</h2>

<p>You can declare 'ngI18nConfig' in your app as follows:</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">yourApp</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'yourApp'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'ngI18n'</span><span class="p">]);</span>
<span class="nx">yourApp</span><span class="p">.</span><span class="nx">value</span><span class="p">(</span><span class="s1">'ngI18nConfig'</span><span class="p">,</span> <span class="p">{</span>
    <span class="p">...</span> <span class="p">{</span><span class="nx">add</span> <span class="nx">your</span> <span class="nx">global</span> <span class="nx">defaults</span><span class="p">}</span>
<span class="p">});</span>
</pre></div>

<p>Global options that can be provided:</p>

<ul>
<li> defaultLocale: specifies the default locale (required and in lowercase)</li>
<li> supportedLocales: specifies the supported locales (required and in lowercase)</li>
<li> basePath: specifies base path of url (optional)</li>
<li> cache: enables caching of the resource bundle (optional)</li>
</ul><h3>'defaultLocale' (always in lowercase, has no global default and should always be provided!!)</h3>

<p>Example config:</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">yourApp</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'yourApp'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'ngI18n'</span><span class="p">]);</span>
<span class="nx">yourApp</span><span class="p">.</span><span class="nx">value</span><span class="p">(</span><span class="s1">'ngI18nConfig'</span><span class="p">,</span> <span class="p">{</span>
    <span class="c1">//defaultLocale should be in lowercase and is required!!</span>
    <span class="nx">defaultLocale</span><span class="o">:</span> <span class="s1">'en-us'</span>
    <span class="p">...</span> <span class="p">{</span><span class="nx">add</span> <span class="nx">your</span> <span class="nx">other</span> <span class="nx">global</span> <span class="nx">defaults</span><span class="p">}</span>
<span class="p">});</span>
</pre></div>

<h3>'supportedLocales' (always in lowercase, has no global default and should always be provided!!)</h3>

<p>Example config:</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">yourApp</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'yourApp'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'ngI18n'</span><span class="p">]);</span>
<span class="nx">yourApp</span><span class="p">.</span><span class="nx">value</span><span class="p">(</span><span class="s1">'ngI18nConfig'</span><span class="p">,</span> <span class="p">{</span>
    <span class="c1">//supportedLocales is required - all locales should be in lowercase!!</span>
    <span class="nx">supportedLocales</span><span class="o">:</span> <span class="p">[</span><span class="s1">'en-us'</span><span class="p">,</span> <span class="s1">'nl'</span><span class="p">]</span>
    <span class="p">...</span> <span class="p">{</span><span class="nx">add</span> <span class="nx">your</span> <span class="nx">other</span> <span class="nx">global</span> <span class="nx">defaults</span><span class="p">}</span>
<span class="p">});</span>
</pre></div>

<h3>'basePath' (global default is 'i18n')</h3>

<p>Example config:</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">yourApp</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'yourApp'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'ngI18n'</span><span class="p">]);</span>
<span class="nx">yourApp</span><span class="p">.</span><span class="nx">value</span><span class="p">(</span><span class="s1">'ngI18nConfig'</span><span class="p">,</span> <span class="p">{</span>
    <span class="c1">//without leading and trailing slashes, default is i18n</span>
    <span class="nx">basePath</span><span class="o">:</span> <span class="s1">'base/path'</span>
    <span class="p">...</span> <span class="p">{</span><span class="nx">add</span> <span class="nx">your</span> <span class="nx">other</span> <span class="nx">global</span> <span class="nx">defaults</span><span class="p">}</span>
<span class="p">});</span>
</pre></div>

<h3>'cache' (global default is false)</h3>

<p>When the cache is enabled, $http stores the response from the server (the resource bundle) in local cache.
<br>
Example config:</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">yourApp</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'yourApp'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'ngI18n'</span><span class="p">]);</span>
<span class="nx">yourApp</span><span class="p">.</span><span class="nx">value</span><span class="p">(</span><span class="s1">'ngI18nConfig'</span><span class="p">,</span> <span class="p">{</span>
    <span class="c1">//default is false</span>
    <span class="nx">cache</span><span class="o">:</span> <span class="kc">true</span>
    <span class="p">...</span> <span class="p">{</span><span class="nx">add</span> <span class="nx">your</span> <span class="nx">other</span> <span class="nx">global</span> <span class="nx">defaults</span><span class="p">}</span>
<span class="p">});</span>
</pre></div>

<h2>ngI18nResourceBundle service</h2>

<p>It has one method <code>get(options)</code>.
<br>
It will load the resource bundle according to the following algorithm:</p>

<pre><code>First determine locale
    Locale provided with options?
        Yes =&gt; use this locale
        No =&gt; use locale form browser ($window.navigator.userLanguage || $window.navigator.language)

Is this locale the default locale?
    Yes =&gt; get default resourceBundle e.g. /i18n/resourceBundle.json
    No =&gt; is this locale one of the supported locales?
            Yes =&gt; get resourceBundle with locale suffix e.g. /i18n/resourceBundle_en-us.json (locale =&gt; 'en-us')
            No =&gt; is language from locale default locale?
                Yes =&gt; get default resourceBundle e.g. /i18n/resourceBundle.json
                No =&gt;  is language from this locale one of the supported locales?
                    Yes =&gt; get resourceBundle with language from locale suffix
                            e.g. /i18n/resourceBundle_en.json (locale =&gt; 'en-us')
                    No =&gt; fallback to default resourceBundle e.g. /i18n/resourceBundle.json
</code></pre>

<p>Local options that can be provided:</p>

<ul>
<li> locale: specifies the locale for the resource bundle (optional)</li>
<li> name: specifies the name for the resource bundle (optional)</li>
</ul><h3>Examples</h3>

<p>The examples use the following configuration:</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">yourApp</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'yourApp'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'ngI18n'</span><span class="p">]);</span>
<span class="nx">yourApp</span><span class="p">.</span><span class="nx">value</span><span class="p">(</span><span class="s1">'ngI18nConfig'</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">defaultLocale</span><span class="o">:</span> <span class="s1">'en'</span><span class="p">,</span>
    <span class="nx">supportedLocales</span><span class="o">:</span> <span class="p">[</span><span class="s1">'en'</span><span class="p">,</span> <span class="s1">'nl'</span><span class="p">,</span> <span class="s1">'fr-be'</span><span class="p">],</span>
    <span class="nx">basePath</span><span class="o">:</span> <span class="s1">'app/i18n'</span><span class="p">,</span>
    <span class="nx">cache</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">});</span>
</pre></div>

<p>Http Server running at http://localhost:8000/</p>

<h4>example - locale is default locale</h4>

<div class="highlight"><pre><span class="nx">ngI18nResourceBundle</span><span class="p">.</span><span class="nx">get</span><span class="p">({</span><span class="nx">locale</span><span class="o">:</span> <span class="s1">'en'</span><span class="p">});</span>
</pre></div>

<p>=&gt; GET http://localhost:8000/app/i18n/resourceBundle.json</p>

<h4>example - locale is one of the supported locales</h4>

<div class="highlight"><pre><span class="nx">ngI18nResourceBundle</span><span class="p">.</span><span class="nx">get</span><span class="p">({</span><span class="nx">locale</span><span class="o">:</span> <span class="s1">'nl'</span><span class="p">});</span>
</pre></div>

<p>=&gt; GET http://localhost:8000/app/i18n/resourceBundle_nl.json</p>

<h4>example - language of locale is one of the supported locales</h4>

<div class="highlight"><pre><span class="nx">ngI18nResourceBundle</span><span class="p">.</span><span class="nx">get</span><span class="p">({</span><span class="nx">locale</span><span class="o">:</span> <span class="s1">'en-US'</span><span class="p">});</span>
</pre></div>

<p>=&gt; GET http://localhost:8000/app/i18n/resourceBundle_en.json</p>

<h4>example - locale with country is one of the supported locales</h4>

<div class="highlight"><pre><span class="nx">ngI18nResourceBundle</span><span class="p">.</span><span class="nx">get</span><span class="p">({</span><span class="nx">locale</span><span class="o">:</span> <span class="s1">'fr-BE'</span><span class="p">});</span>
</pre></div>

<p>=&gt; GET http://localhost:8000/app/i18n/resourceBundle_fr-be.json (lowercase)</p>

<h4>example - locale not supported</h4>

<div class="highlight"><pre><span class="nx">ngI18nResourceBundle</span><span class="p">.</span><span class="nx">get</span><span class="p">({</span><span class="nx">locale</span><span class="o">:</span> <span class="s1">'de'</span><span class="p">});</span>
</pre></div>

<p>=&gt; GET http://localhost:8000/app/i18n/resourceBundle.json  (default resourceBundle)</p>

<h4>example - custom name</h4>

<div class="highlight"><pre><span class="nx">ngI18nResourceBundle</span><span class="p">.</span><span class="nx">get</span><span class="p">({</span><span class="nx">locale</span><span class="o">:</span> <span class="s1">'en'</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">'customName'</span><span class="p">});</span>
</pre></div>

<p>=&gt; GET http://localhost:8000/app/i18n/customName.json</p>

<div class="highlight"><pre><span class="nx">ngI18nResourceBundle</span><span class="p">.</span><span class="nx">get</span><span class="p">({</span><span class="nx">locale</span><span class="o">:</span> <span class="s1">'nl'</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">'customName'</span><span class="p">});</span>
</pre></div>

<p>=&gt; GET http://localhost:8000/app/i18n/customName_nl.json</p>

<h4>example - caching</h4>

<div class="highlight"><pre><span class="c1">//first call</span>
<span class="nx">ngI18nResourceBundle</span><span class="p">.</span><span class="nx">get</span><span class="p">({</span><span class="nx">locale</span><span class="o">:</span> <span class="s1">'en'</span><span class="p">});</span>
<span class="c1">//second call</span>
<span class="nx">ngI18nResourceBundle</span><span class="p">.</span><span class="nx">get</span><span class="p">({</span><span class="nx">locale</span><span class="o">:</span> <span class="s1">'en'</span><span class="p">});</span>
</pre></div>

<p>first call =&gt; GET http://localhost:8000/app/i18n/resourceBundle.json
<br>
second call =&gt; no call, the resource bundle is retrieved from local cache</p>

<h2>Example app</h2>

<p>You can find an example app in the app directory.
<br>
Look at <code>app.js</code>, <code>controller.js</code>, <code>index.html</code> and the two partials in the <code>partials</code> directory.</p>

<h3>Running the example app</h3>

<p>You can pick one of these options:</p>

<ul>
<li>serve this repository with your webserver</li>
<li>install node.js and run <code>scripts/web-server.js</code>
</li>
</ul><p>Then navigate your browser to <code>http://localhost:&lt;port&gt;/app/index.html</code> to see the example app running in
your browser.</p>
      </section>
      <footer>
        <p>Project maintained by <a href="https://github.com/gertn">gertn</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="http://twitter.com/#!/michigangraham">mattgraham</a></small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>